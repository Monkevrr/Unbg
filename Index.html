<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Launcher</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #1a0000;
            --header: #330000;
            --text: #fff;
            --muted: #ccc;
            --accent: #ff0000;
            --accentDark: #cc0000;
            --glowColor: #ff0000;
            --cardBg: #1a0000;
            --cardRadius: 15px;
            --glowSize: 20px;
            --glowStrength: 0.3;
            --fontFamily: 'Arial', sans-serif;
            --snowColor: #ffffff;
            --snowCount: 150;
            --snowSize: 3;
            --snowSpeed: 1.2;
        }

        body {
            font-family: var(--fontFamily);
            background: linear-gradient(135deg, var(--bg), #000000);
            color: var(--text);
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Snow Canvas */
        #snowCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            mix-blend-mode: screen;
        }

        /* Sidebar - Now Horizontal Top Menu */
        .sidebar {
            width: 100%;
            height: auto;
            background: linear-gradient(180deg, var(--header), var(--bg));
            border-bottom: 3px solid var(--accent);
            padding: 15px 20px;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
        }

        .sidebar-item {
            position: relative;
            background: linear-gradient(145deg, var(--accentDark), var(--accent));
            border: 2px solid var(--accent);
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .sidebar-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px var(--glowColor);
            filter: brightness(1.2);
        }

        .sidebar-item.active {
            filter: brightness(1.3);
            border-color: #ffff00;
            box-shadow: 0 0 20px rgba(255, 255, 0, 0.5);
        }

        .sidebar-item.locked {
            background: linear-gradient(145deg, #666, #999);
            border-color: #999;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .sidebar-item.locked:hover {
            transform: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .lock-icon {
            margin-left: 5px;
            font-size: 14px;
        }

        /* Tooltip - Adjusted for top menu */
        .tooltip {
            position: absolute;
            left: 50%;
            top: 100%;
            transform: translateX(-50%);
            margin-top: 10px;
            background: var(--accent);
            color: var(--text);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 13px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.7);
            z-index: 200;
            border: 2px solid var(--glowColor);
        }

        .tooltip::before {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 8px solid transparent;
            border-bottom-color: var(--accent);
        }

        .sidebar-item:hover .tooltip {
            opacity: 1;
        }

        /* Main Content Area - Adjusted for top menu */
        .main-wrapper {
            margin-left: 0;
            margin-top: 80px;
            margin-bottom: 80px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: calc(100vh - 160px);
            padding: 20px;
        }

        /* Initial Loading Screen */
        #initial-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--bg), #000000);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .initial-spinner {
            position: relative;
            width: 120px;
            height: 120px;
            margin-bottom: 30px;
            perspective: 1000px;
        }

        .initial-spinner::before,
        .initial-spinner::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid transparent;
        }

        .initial-spinner::before {
            border-top-color: var(--accent);
            border-right-color: var(--accentDark);
            animation: spin3d 1.5s linear infinite;
            box-shadow: 0 0 30px var(--accent), inset 0 0 20px var(--glowColor);
        }

        .initial-spinner::after {
            border-bottom-color: var(--glowColor);
            border-left-color: var(--accentDark);
            animation: spin3d 2s linear infinite reverse;
            box-shadow: 0 0 20px var(--accentDark);
        }

        @keyframes spin3d {
            0% { transform: rotateY(0deg) rotateX(30deg); }
            100% { transform: rotateY(360deg) rotateX(30deg); }
        }

        .loading-text {
            font-size: 24px;
            color: var(--accent);
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 20px var(--glowColor);
            font-weight: bold;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .game-count {
            font-size: 18px;
            color: var(--muted);
            text-align: center;
        }

        /* Content */
        .content {
            display: none;
            width: 100%;
            max-width: 1600px;
            animation: slideIn 0.4s ease-out;
        }

        .content.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Search Bar */
        .search-bar {
            width: 100%;
            max-width: 800px;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            background: linear-gradient(145deg, #220000, #1a0000);
            border: 2px solid var(--accent);
            border-radius: 50px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            transition: box-shadow 0.3s;
        }

        .search-bar:focus-within {
            box-shadow: 0 0 30px var(--glowColor);
        }

        .search-bar input {
            flex: 1;
            background: transparent;
            border: none;
            padding: 15px 20px;
            color: var(--text);
            font-size: 16px;
            outline: none;
        }

        .search-bar input::placeholder {
            color: var(--muted);
        }

        .search-bar button {
            background: var(--accent);
            border: none;
            padding: 15px 25px;
            cursor: pointer;
            color: var(--text);
            font-size: 16px;
            font-weight: bold;
            transition: background 0.3s;
        }

        .search-bar button:hover {
            background: var(--accentDark);
        }

        /* Game Grid */
        .game-sections {
            width: 100%;
        }

        .section-title {
            font-size: 28px;
            font-weight: bold;
            margin: 30px 0 20px;
            color: var(--accent);
            text-shadow: 0 0 15px var(--glowColor);
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            padding: 20px 0;
        }

        .game-card {
            background: linear-gradient(145deg, #220000, var(--cardBg));
            border: 2px solid var(--accent);
            border-radius: var(--cardRadius);
            padding: 0;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            position: relative;
        }

        .game-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 0 30px var(--glowColor), 0 10px 30px rgba(0, 0, 0, 0.7);
            border-color: var(--glowColor);
        }

        .game-cover {
            width: 100%;
            height: 180px;
            object-fit: cover;
            background: linear-gradient(135deg, #330000, #1a0000);
            border-bottom: 2px solid var(--accent);
        }

        .game-cover.placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: var(--accent);
        }

        .game-info {
            padding: 15px;
        }

        .game-card h3 {
            font-size: 18px;
            margin-bottom: 8px;
            color: var(--text);
        }

        .game-author {
            font-size: 13px;
            color: var(--muted);
            margin-bottom: 8px;
        }

        .game-card p {
            font-size: 14px;
            color: var(--muted);
        }

        .external-link-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent);
            color: var(--text);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
        }

        /* Alphabet Navigation */
        .alphabet-nav {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .alphabet-letter {
            background: linear-gradient(145deg, var(--accentDark), var(--accent));
            border: 2px solid var(--accent);
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            font-size: 18px;
            transition: all 0.3s;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.5);
        }

        .alphabet-letter:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 20px var(--glowColor);
        }

        .alphabet-letter.disabled {
            background: linear-gradient(145deg, #333, #222);
            border-color: #555;
            cursor: not-allowed;
            opacity: 0.3;
        }

        .alphabet-letter.disabled:hover {
            transform: none;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.5);
        }

        /* No Results */
        #noResults {
            display: none;
            text-align: center;
            padding: 60px 20px;
            color: var(--muted);
        }

        #noResults h2 {
            font-size: 32px;
            color: var(--accent);
            margin-bottom: 15px;
        }

        /* Proxys Tab */
        .proxy-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            padding: 20px 0;
        }

        .proxy-item {
            background: linear-gradient(145deg, #220000, var(--cardBg));
            border: 2px solid var(--accent);
            border-radius: 15px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .proxy-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 0 30px var(--glowColor);
            border-color: var(--glowColor);
        }

        /* Settings Tab */
        .settings-section {
            background: linear-gradient(145deg, #220000, var(--cardBg));
            border: 2px solid var(--accent);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .settings-section h2 {
            color: var(--accent);
            margin-bottom: 20px;
            font-size: 24px;
            text-shadow: 0 0 10px var(--glowColor);
        }

        .theme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .theme-option {
            padding: 20px;
            border: 2px solid;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            font-weight: bold;
        }

        .theme-option:hover {
            transform: scale(1.05);
        }

        .theme-option.active {
            border-width: 4px;
            box-shadow: 0 0 20px;
        }

        .settings-input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            background: #1a0000;
            border: 2px solid var(--accent);
            border-radius: 8px;
            color: var(--text);
            font-size: 16px;
        }

        .settings-button {
            background: var(--accent);
            color: var(--text);
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .settings-button:hover {
            background: var(--accentDark);
            box-shadow: 0 0 20px var(--glowColor);
        }

        /* Game Container */
        #game-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 1000;
            flex-direction: column;
        }

        .game-header {
            background: linear-gradient(180deg, var(--header), var(--bg));
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 2px solid var(--accent);
        }

        .game-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--accent);
        }

        .game-controls {
            display: flex;
            gap: 10px;
        }

        .game-btn {
            background: var(--accent);
            border: 2px solid var(--glowColor);
            color: var(--text);
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .game-btn:hover {
            background: var(--accentDark);
            box-shadow: 0 0 15px var(--glowColor);
        }

        #game-frame {
            flex: 1;
            border: none;
            width: 100%;
            height: 100%;
        }

        /* Game Loader */
        #game-loader {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--bg), #000000);
            z-index: 1500;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .loader-spinner {
            position: relative;
            width: 100px;
            height: 100px;
            margin-bottom: 30px;
        }

        .loader-spinner::before,
        .loader-spinner::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 6px solid transparent;
        }

        .loader-spinner::before {
            border-top-color: var(--accent);
            border-right-color: var(--accentDark);
            animation: spin 1s linear infinite;
        }

        .loader-spinner::after {
            border-bottom-color: var(--glowColor);
            border-left-color: var(--accentDark);
            animation: spin 1.5s linear infinite reverse;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .verse-container {
            max-width: 600px;
            text-align: center;
            padding: 20px;
            color: var(--text);
        }

        #verseText {
            font-size: 20px;
            font-style: italic;
            margin-bottom: 10px;
            color: var(--accent);
        }

        #verseReference {
            font-size: 16px;
            color: var(--muted);
        }

        /* Fullscreen Hint */
        .fullscreen-hint {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: var(--text);
            padding: 20px 40px;
            border-radius: 10px;
            border: 2px solid var(--accent);
            font-size: 18px;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .fullscreen-hint.show {
            opacity: 1;
        }

        /* Locked Overlay */
        .locked-overlay {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            text-align: center;
        }

        .locked-overlay h2 {
            font-size: 48px;
            color: var(--accent);
            margin-bottom: 20px;
        }

        .locked-overlay code {
            background: #220000;
            padding: 5px 15px;
            border-radius: 5px;
            color: var(--accent);
            font-family: monospace;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                flex-wrap: wrap;
                padding: 10px;
                gap: 10px;
            }

            .sidebar-item {
                padding: 10px 15px;
                font-size: 14px;
            }

            .game-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 15px;
            }

            .alphabet-nav {
                gap: 5px;
            }

            .alphabet-letter {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <canvas id="snowCanvas"></canvas>

    <!-- Top Menu Bar (was sidebar) -->
    <div class="sidebar">
        <div class="sidebar-item active" id="gamesItem" onclick="switchTab('games')">
            üéÆ Games
            <span class="tooltip">Browse all available games</span>
        </div>
        <div class="sidebar-item locked" id="proxysItem" onclick="switchTab('proxys')">
            üåê Proxys <i class="fa-solid fa-lock lock-icon"></i>
            <span class="tooltip">üîí Type 'unlockproxy' to unlock</span>
        </div>
        <div class="sidebar-item" id="settingsItem" onclick="switchTab('settings')">
            ‚öôÔ∏è Settings
            <span class="tooltip">Customize your experience</span>
        </div>
        <div class="sidebar-item locked" id="testingItem" onclick="switchTab('testing')">
            üß™ Testing <i class="fa-solid fa-lock lock-icon"></i>
            <span class="tooltip">üîí Type 'unlocktesting' to unlock</span>
        </div>
    </div>

    <!-- Initial Loading Screen -->
    <div id="initial-loader">
        <div class="initial-spinner"></div>
        <div class="loading-text">Loading Game Launcher...</div>
        <div class="game-count" id="gameCount">Connecting to GitHub...</div>
    </div>

    <!-- Main Content -->
    <div class="main-wrapper" id="main-content" style="display: none;">
        <!-- Games Tab -->
        <div class="content active" id="games">
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search games..." oninput="filterGames()">
                <button onclick="clearSearch()">Clear</button>
            </div>

            <div id="alphabetNav" class="alphabet-nav"></div>

            <div id="noResults">
                <h2>No Games Found</h2>
                <p>Try a different search term</p>
            </div>

            <div id="game-sections" class="game-sections"></div>
        </div>

        <!-- Proxys Tab -->
        <div class="content" id="proxys">
            <h1 style="text-align:center; color: var(--accent); margin-bottom: 30px;">üåê Proxy Browser</h1>
            <div class="proxy-list" id="proxyList"></div>
        </div>

        <!-- Settings Tab -->
        <div class="content" id="settings">
            <div class="settings-section">
                <h2>üé® Theme Customization</h2>
                <p style="color: var(--muted); margin-bottom: 20px;">Choose your preferred color scheme</p>
                <div class="theme-grid" id="themeGrid"></div>
            </div>

            <div class="settings-section">
                <h2>üîó Teacher Quick Link</h2>
                <p style="color: var(--muted); margin-bottom: 15px;">Set a custom URL to quickly access when needed</p>
                <input type="text" class="settings-input" id="teacherLinkInput" placeholder="Enter URL (e.g., https://classroom.google.com)">
                <button class="settings-button" onclick="saveTeacherLink()">Save Link</button>
                <button class="settings-button" onclick="openTeacherLink()" style="margin-left: 10px;">Open Link</button>
            </div>

            <div class="settings-section">
                <h2>üìë Tab Customization</h2>
                <p style="color: var(--muted); margin-bottom: 15px;">Customize browser tab appearance</p>
                <input type="text" class="settings-input" id="tabTitleInput" placeholder="Custom tab title">
                <input type="text" class="settings-input" id="tabIconInput" placeholder="Favicon URL (optional)">
                <button class="settings-button" onclick="saveTabCustomization()">Apply Changes</button>
                <button class="settings-button" onclick="resetTabCustomization()" style="margin-left: 10px;">Reset</button>
            </div>
        </div>

        <!-- Testing Tab -->
        <div class="content" id="testing">
            <div class="locked-overlay">
                <h2>üîí Locked</h2>
                <p>Type <code>unlocktesting</code> in the search bar to unlock this section.</p>
            </div>
        </div>
    </div>

    <!-- Game Container -->
    <div id="game-container">
        <div class="game-header">
            <div class="game-title" id="currentGameTitle">Loading...</div>
            <div class="game-controls">
                <button class="game-btn" id="fullscreenBtn" onclick="toggleFullscreen()">‚õ∂ Fullscreen</button>
                <button class="game-btn" onclick="reloadGame()">üîÑ Reload</button>
                <button class="game-btn" onclick="closeGame()">‚úñ Close</button>
            </div>
        </div>
        <iframe id="game-frame"></iframe>
    </div>

    <!-- Game Loader -->
    <div id="game-loader">
        <div class="loader-spinner"></div>
        <div class="verse-container">
            <div id="verseText"></div>
            <div id="verseReference"></div>
        </div>
    </div>

    <!-- Fullscreen Hint -->
    <div class="fullscreen-hint" id="fullscreenHint">
        Press ESC to exit fullscreen
    </div>
<script>
    // Configuration
    const GITHUB_USER = 'Monkevrr';
    const GITHUB_REPO = 'Unbg';
    const GITHUB_BRANCH = 'main';
    const COVER_REPO = 'covsw';
    const COVER_URL = `https://cdn.jsdelivr.net/gh/${GITHUB_USER}/${COVER_REPO}@main`;

    // Games data - Load from JSON
    const GAMES_JSON = [
  {
    "id": -1,
    "name": "[!] SUGGEST GAMES .gg/D4c9VFYWyU",
    "cover": `${COVER_URL}/-suggest-games-ggd4c9vfywyu.png`,
    "url": "https://discord.gg/D4c9VFYWyU"
  },
  {
    "id": 0,
    "name": "Bowmasters",
    "cover": `${COVER_URL}/bowmasters.png`,
    "url": "bowmasters.html",
    "author": "Azur Games, Playgendary"
  },
  {
    "id": 1,
    "name": "OvO",
    "cover": `${COVER_URL}/ovo.png`,
    "url": "ovo.html",
    "author": "Dedra Games"
  }
  // ... rest of your games (add ${COVER_URL}/ before each cover filename)
];

    let games = [];
    let proxies = [];
    let currentGame = { filename: '', title: '' };
    let proxyUnlocked = localStorage.getItem('proxyUnlocked') === 'true';
    let testingUnlocked = localStorage.getItem('testingUnlocked') === 'true';

    // Theme system with all 27 themes
    const themes = {
        midnight_blossom: {
            bg: "#1a1023", header: "#2a1738", text: "#f8eaff", muted: "#d7c6e6",
            accent: "#ff7bda", accentDark: "#b30088", glowColor: "#ffb3ef", cardBg: "#261332",
            cardRadius: 12, glowSize: 28, glowStrength: 0.55, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#ffcdf5", snowCount: 130, snowSize: 3, snowSpeed: 1.4
        },
        emerald_peak: {
            bg: "#051914", header: "#0b2c22", text: "#dcfff5", muted: "#b9e6d2",
            accent: "#4cffc1", accentDark: "#158f6b", glowColor: "#77ffd9", cardBg: "#0f3b2c",
            cardRadius: 14, glowSize: 22, glowStrength: 0.4, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#a8ffe5", snowCount: 110, snowSize: 3, snowSpeed: 1.2
        },
        solar_flare: {
            bg: "#2a0b00", header: "#4d1300", text: "#ffe6d4", muted: "#ffc4a1",
            accent: "#ff5e00", accentDark: "#a63500", glowColor: "#ff9e66", cardBg: "#3b0f00",
            cardRadius: 10, glowSize: 33, glowStrength: 0.6, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#ff7033", snowCount: 85, snowSize: 4, snowSpeed: 1.7
        },
        frostbyte: {
            bg: "#02131e", header: "#062738", text: "#ddf7ff", muted: "#b8e5f2",
            accent: "#52d7ff", accentDark: "#1e7da3", glowColor: "#b8f5ff", cardBg: "#0a2c40",
            cardRadius: 18, glowSize: 25, glowStrength: 0.52, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#cff7ff", snowCount: 200, snowSize: 2, snowSpeed: 1.1
        },
        bubblegum_dream: {
            bg: "#ffdef2", header: "#ffd1ee", text: "#5e004a", muted: "#8a006b",
            accent: "#ff77cf", accentDark: "#d1008d", glowColor: "#ffb0e8", cardBg: "#ffd8ef",
            cardRadius: 20, glowSize: 20, glowStrength: 0.4, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#ff87d9", snowCount: 50, snowSize: 5, snowSpeed: 0.8
        },
        radioactive_neon: {
            bg: "#031301", header: "#062705", text: "#dfffda", muted: "#b9e6bc",
            accent: "#39ff14", accentDark: "#1faf08", glowColor: "#7dff67", cardBg: "#0b3d09",
            cardRadius: 10, glowSize: 40, glowStrength: 0.9, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#7fff52", snowCount: 150, snowSize: 3, snowSpeed: 1.6
        },
        sunset_sorbet: {
            bg: "#3b0f1c", header: "#5c1830", text: "#ffeef5", muted: "#ffbfd5",
            accent: "#ff668f", accentDark: "#b33252", glowColor: "#ff9cb5", cardBg: "#471427",
            cardRadius: 15, glowSize: 30, glowStrength: 0.5, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#ffb6ce", snowCount: 120, snowSize: 3, snowSpeed: 1.3
        },
        cafe_mocha: {
            bg: "#2a1a10", header: "#3b2415", text: "#ffe8d8", muted: "#d9c3b5",
            accent: "#b87445", accentDark: "#7c4c2d", glowColor: "#d8a986", cardBg: "#351f13",
            cardRadius: 12, glowSize: 18, glowStrength: 0.38, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#c59c7a", snowCount: 60, snowSize: 4, snowSpeed: 0.9
        },
        aqua_wave: {
            bg: "#001a26", header: "#003344", text: "#dcf8ff", muted: "#b9e6f2",
            accent: "#3ddcff", accentDark: "#117d99", glowColor: "#8af0ff", cardBg: "#002a38",
            cardRadius: 16, glowSize: 26, glowStrength: 0.58, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#a8f6ff", snowCount: 140, snowSize: 3, snowSpeed: 1.4
        },
        moonlight_silver: {
            bg: "#0f0f14", header: "#1a1a22", text: "#f2f2f6", muted: "#bcbcc6",
            accent: "#9ea4ff", accentDark: "#5056c8", glowColor: "#c4c7ff", cardBg: "#16161d",
            cardRadius: 12, glowSize: 28, glowStrength: 0.5, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#d3d6ff", snowCount: 120, snowSize: 3, snowSpeed: 1.2
        },
        jungle_mist: {
            bg: "#0b1f12", header: "#153423", text: "#e8ffe8", muted: "#cceccc",
            accent: "#66ff8c", accentDark: "#27994a", glowColor: "#99ffc0", cardBg: "#102a1a",
            cardRadius: 14, glowSize: 22, glowStrength: 0.43, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#b6ffd2", snowCount: 90, snowSize: 3, snowSpeed: 1.3
        },
        ocean_dusk: {
            bg: "#001224", header: "#002544", text: "#dff2ff", muted: "#b8d7e6",
            accent: "#6cb8ff", accentDark: "#2c6ba3", glowColor: "#a3d7ff", cardBg: "#001d33",
            cardRadius: 18, glowSize: 24, glowStrength: 0.45, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#bcdfff", snowCount: 160, snowSize: 2, snowSpeed: 1.1
        },
        pink_frost: {
            bg: "#2b0d1f", header: "#471634", text: "#ffdff5", muted: "#f1b9d8",
            accent: "#ff7ec4", accentDark: "#b24284", glowColor: "#ffb2dc", cardBg: "#3b122a",
            cardRadius: 16, glowSize: 34, glowStrength: 0.6, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#ffc2e6", snowCount: 150, snowSize: 3, snowSpeed: 1.5
        },
        techno_grid: {
            bg: "#0a0a0f", header: "#15151f", text: "#e3e9ff", muted: "#b7c0e6",
            accent: "#40bbff", accentDark: "#1778a3", glowColor: "#89d8ff", cardBg: "#12121a",
            cardRadius: 12, glowSize: 36, glowStrength: 0.75, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#66ccff", snowCount: 180, snowSize: 3, snowSpeed: 1.6
        },
        sunny_field: {
            bg: "#fff8d9", header: "#ffeeb3", text: "#663e00", muted: "#8c5c1a",
            accent: "#ffcc33", accentDark: "#c78a00", glowColor: "#ffe57a", cardBg: "#fff1bf",
            cardRadius: 20, glowSize: 20, glowStrength: 0.35, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#ffe28a", snowCount: 50, snowSize: 4, snowSpeed: 0.9
        },
        mint_leaf: {
            bg: "#e6fff4", header: "#c6ffe6", text: "#004d33", muted: "#267359",
            accent: "#33ffb8", accentDark: "#0fa36e", glowColor: "#8cffd7", cardBg: "#d2ffe8",
            cardRadius: 18, glowSize: 18, glowStrength: 0.32, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#a0ffe6", snowCount: 40, snowSize: 5, snowSpeed: 0.7
        },
        void_shadow: {
            bg: "#000000", header: "#0a0a0a", text: "#e6e6e6", muted: "#999999",
            accent: "#5a5a5a", accentDark: "#2a2a2a", glowColor: "#bbbbbb", cardBg: "#080808",
            cardRadius: 10, glowSize: 40, glowStrength: 0.8, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#cccccc", snowCount: 200, snowSize: 2, snowSpeed: 1.2
        },
        ruby_crystal: {
            bg: "#290001", header: "#400002", text: "#ffe5e8", muted: "#ffb3bb",
            accent: "#ff3355", accentDark: "#a30024", glowColor: "#ff8899", cardBg: "#320002",
            cardRadius: 14, glowSize: 32, glowStrength: 0.6, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#ff99aa", snowCount: 130, snowSize: 3, snowSpeed: 1.6
        },
        arctic_bloom: {
            bg: "#f2fcff", header: "#dff8ff", text: "#004f63", muted: "#1b6e84",
            accent: "#53dfff", accentDark: "#0c8ba3", glowColor: "#9eeeff", cardBg: "#e7f9ff",
            cardRadius: 18, glowSize: 18, glowStrength: 0.3, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#bbf2ff", snowCount: 60, snowSize: 4, snowSpeed: 0.9
        },
        honey_glow: {
            bg: "#2a1900", header: "#412600", text: "#ffefcc", muted: "#ddc7a1",
            accent: "#ffb300", accentDark: "#a67300", glowColor: "#ffd677", cardBg: "#352000",
            cardRadius: 12, glowSize: 26, glowStrength: 0.46, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#ffcf87", snowCount: 100, snowSize: 3, snowSpeed: 1.2
        },
        acid_punch: {
            bg: "#12001a", header: "#260033", text: "#ffe6ff", muted: "#d9b3e6",
            accent: "#ff00cc", accentDark: "#99007a", glowColor: "#ff80dd", cardBg: "#1c0026",
            cardRadius: 16, glowSize: 38, glowStrength: 0.72, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#ffaae8", snowCount: 150, snowSize: 3, snowSpeed: 1.5
        },
        arctic_night: {
            bg: "#06080f", header: "#0b1120", text: "#dde6ff", muted: "#a7b4d9",
            accent: "#5577ff", accentDark: "#2a3c99", glowColor: "#9bb5ff", cardBg: "#090d14",
            cardRadius: 10, glowSize: 27, glowStrength: 0.55, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#c3d2ff", snowCount: 170, snowSize: 3, snowSpeed: 1.4
        },
        rainforest_dew: {
            bg: "#0d1f17", header: "#123026", text: "#e0fff3", muted: "#bee6d8",
            accent: "#4cffac", accentDark: "#1d8f64", glowColor: "#92ffd3", cardBg: "#102a20",
            cardRadius: 14, glowSize: 24, glowStrength: 0.42, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#b6ffe1", snowCount: 100, snowSize: 3, snowSpeed: 1.2
        },
        candy_arcade: {
            bg: "#230011", header: "#3b001b", text: "#ffebf3", muted: "#ffc4db",
            accent: "#ff4fa4", accentDark: "#a30062", glowColor: "#ff9bcf", cardBg: "#310016",
            cardRadius: 18, glowSize: 36, glowStrength: 0.7, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#ffb4da", snowCount: 140, snowSize: 3, snowSpeed: 1.5
        },
        obsidian_gold: {
            bg: "#0a0905", header: "#1a180f", text: "#f7e7bf", muted: "#d4c193",
            accent: "#e6b400", accentDark: "#9c7d00", glowColor: "#ffe680", cardBg: "#12110a",
            cardRadius: 12, glowSize: 28, glowStrength: 0.55, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#f5d97c", snowCount: 100, snowSize: 3, snowSpeed: 1.3
        },
        glacial_berry: {
            bg: "#1e0033", header: "#32004f", text: "#f4e6ff", muted: "#d4b3f7",
            accent: "#bf59ff", accentDark: "#7826a6", glowColor: "#d9a3ff", cardBg: "#290041",
            cardRadius: 15, glowSize: 33, glowStrength: 0.6, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#e7c3ff", snowCount: 145, snowSize: 3, snowSpeed: 1.5
        },
        lavender_fade: {
            bg: "#f4edff", header: "#e9ddff", text: "#3b2b66", muted: "#695a91",
            accent: "#b899ff", accentDark: "#6f59b3", glowColor: "#d2c2ff", cardBg: "#ede3ff",
            cardRadius: 20, glowSize: 20, glowStrength: 0.33, fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            snowColor: "#d8caff", snowCount: 60, snowSize: 4, snowSpeed: 0.8
        }
    };

    let currentTheme = localStorage.getItem('selectedTheme') || 'midnight_blossom';

    function applyTheme(themeName) {
        const theme = themes[themeName];
        if (!theme) return;
        
        const root = document.documentElement;
        
        // Apply all theme properties
        root.style.setProperty('--bg', theme.bg);
        root.style.setProperty('--header', theme.header);
        root.style.setProperty('--text', theme.text);
        root.style.setProperty('--muted', theme.muted);
        root.style.setProperty('--accent', theme.accent);
        root.style.setProperty('--accentDark', theme.accentDark);
        root.style.setProperty('--glowColor', theme.glowColor);
        root.style.setProperty('--cardBg', theme.cardBg);
        root.style.setProperty('--cardRadius', theme.cardRadius + 'px');
        root.style.setProperty('--glowSize', theme.glowSize + 'px');
        root.style.setProperty('--glowStrength', theme.glowStrength);
        root.style.setProperty('--fontFamily', theme.fontFamily);
        root.style.setProperty('--snowColor', theme.snowColor);
        root.style.setProperty('--snowCount', theme.snowCount);
        root.style.setProperty('--snowSize', theme.snowSize);
        root.style.setProperty('--snowSpeed', theme.snowSpeed);
        
        currentTheme = themeName;
        localStorage.setItem('selectedTheme', themeName);
        
        // Recreate snow effect with new theme settings
        createSnowEffect();
    }

    function renderThemeGrid() {
        const grid = document.getElementById('themeGrid');
        grid.innerHTML = Object.keys(themes).map(name => {
            const theme = themes[name];
            const active = name === currentTheme ? 'active' : '';
            const displayName = name.split('_').map(word => 
                word.charAt(0).toUpperCase() + word.slice(1)
            ).join(' ');
            
            return `
                <div class="theme-option ${active}" 
                     style="background: ${theme.bg}; border-color: ${theme.accent}; color: ${theme.text};"
                     onclick="applyTheme('${name}'); renderThemeGrid();">
                    ${displayName}
                </div>
            `;
        }).join('');
    }

    // [REST OF YOUR JAVASCRIPT CODE CONTINUES HERE - all the other functions]
    // ... (keep all your other functions like saveTeacherLink, filterGames, etc.)
    // Teacher Link
    function saveTeacherLink() {
        const input = document.getElementById('teacherLinkInput');
        localStorage.setItem('teacherLink', input.value);
        alert('Teacher link saved!');
    }

    function loadTeacherLink() {
        const saved = localStorage.getItem('teacherLink');
        if (saved) {
            document.getElementById('teacherLinkInput').value = saved;
        }
    }

    function openTeacherLink() {
        const link = localStorage.getItem('teacherLink');
        if (link) {
            window.open(link, '_blank');
        } else {
            alert('No teacher link saved. Please set one first.');
        }
    }

    // Tab Customization
    function saveTabCustomization() {
        const title = document.getElementById('tabTitleInput').value;
        const icon = document.getElementById('tabIconInput').value;
        
        if (title) {
            document.title = title;
            localStorage.setItem('customTabTitle', title);
        }
        
        if (icon) {
            let link = document.querySelector("link[rel*='icon']");
            if (!link) {
                link = document.createElement('link');
                link.rel = 'icon';
                document.head.appendChild(link);
            }
            link.href = icon;
            localStorage.setItem('customTabIcon', icon);
        }
        
        alert('Tab customization applied!');
    }

    function loadTabCustomization() {
        const title = localStorage.getItem('customTabTitle');
        const icon = localStorage.getItem('customTabIcon');
        
        if (title) {
            document.title = title;
            document.getElementById('tabTitleInput').value = title;
        }
        
        if (icon) {
            let link = document.querySelector("link[rel*='icon']");
            if (!link) {
                link = document.createElement('link');
                link.rel = 'icon';
                document.head.appendChild(link);
            }
            link.href = icon;
            document.getElementById('tabIconInput').value = icon;
        }
    }

    function resetTabCustomization() {
        localStorage.removeItem('customTabTitle');
        localStorage.removeItem('customTabIcon');
        document.title = 'Game Launcher';
        document.getElementById('tabTitleInput').value = '';
        document.getElementById('tabIconInput').value = '';
        
        let link = document.querySelector("link[rel*='icon']");
        if (link) {
            link.href = '';
        }
        
        alert('Tab customization reset!');
    }

    // Bible verses
    const verses = [
        { text: "I can do all things through Christ who strengthens me.", ref: "Philippians 4:13" },
        { text: "For God so loved the world that he gave his one and only Son.", ref: "John 3:16" },
        { text: "Trust in the Lord with all your heart.", ref: "Proverbs 3:5" },
        { text: "The Lord is my shepherd; I shall not want.", ref: "Psalm 23:1" },
        { text: "Be strong and courageous. Do not be afraid.", ref: "Joshua 1:9" }
    ];

    function getRandomVerse() {
        return verses[Math.floor(Math.random() * verses.length)];
    }

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            const gameContainer = document.getElementById('game-container');
            if (gameContainer.style.display === 'flex') {
                closeGame();
            }
        }
        
        if (e.key === 'F11') {
            const gameContainer = document.getElementById('game-container');
            if (gameContainer.style.display === 'flex') {
                e.preventDefault();
                toggleFullscreen();
            }
        }
    });

    // Snow animation
    function createSnowEffect() {
        const canvas = document.getElementById('snowCanvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        const snowflakes = [];
        const snowCount = 150;
        const snowSize = 3;
        const snowSpeed = 1.2;
        
        class Snowflake {
            constructor() {
                this.reset();
            }
            
            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height - canvas.height;
                this.size = Math.random() * snowSize + 1;
                this.speed = Math.random() * snowSpeed + 0.5;
                this.wind = Math.random() * 0.5 - 0.25;
            }
            
            update() {
                this.y += this.speed;
                this.x += this.wind;
                
                if (this.y > canvas.height) {
                    this.reset();
                    this.y = -10;
                }
                
                if (this.x > canvas.width) {
                    this.x = 0;
                } else if (this.x < 0) {
                    this.x = canvas.width;
                }
            }
            
            draw() {
                ctx.fillStyle = '#ffffff';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        for (let i = 0; i < snowCount; i++) {
            snowflakes.push(new Snowflake());
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            snowflakes.forEach(flake => {
                flake.update();
                flake.draw();
            });
            requestAnimationFrame(animate);
        }
        
        animate();
        
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    }

    createSnowEffect();

    // Tab switching
    function switchTab(tabName) {
        document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
        
        document.getElementById(tabName).classList.add('active');
        document.getElementById(tabName + 'Item').classList.add('active');
        
        if (tabName === 'proxys' && !proxyUnlocked) {
            document.getElementById(tabName).innerHTML = '<div class="locked-overlay"><h2>üîí Locked</h2><p>Type <code>unlockproxy</code> in the search bar to unlock this section.</p></div>';
        }
        
        if (tabName === 'testing' && !testingUnlocked) {
            document.getElementById(tabName).innerHTML = '<div class="locked-overlay"><h2>üîí Locked</h2><p>Type <code>unlocktesting</code> in the search bar to unlock this section.</p></div>';
        }
    }

    // Unlock features
    function unlockProxy() {
        proxyUnlocked = true;
        localStorage.setItem('proxyUnlocked', 'true');
        const item = document.getElementById('proxysItem');
        item.classList.remove('locked');
        item.innerHTML = 'üåê Proxys<span class="tooltip">Browse proxy files</span>';
        switchTab('proxys');
    }

    function unlockTesting() {
        testingUnlocked = true;
        localStorage.setItem('testingUnlocked', 'true');
        const item = document.getElementById('testingItem');
        item.classList.remove('locked');
        item.innerHTML = 'üß™ Testing<span class="tooltip">Experimental features</span>';
        switchTab('testing');
    }

    // Search functionality
    function filterGames() {
        const input = document.getElementById('searchInput').value.toLowerCase();
        
        if (input === 'unlockproxy') {
            unlockProxy();
            document.getElementById('searchInput').value = '';
            return;
        }
        
        if (input === 'unlocktesting') {
            unlockTesting();
            document.getElementById('searchInput').value = '';
            return;
        }
        
        const filtered = games.filter(g => g.name.toLowerCase().includes(input));
        
        if (filtered.length === 0) {
            document.getElementById('noResults').style.display = 'block';
            document.getElementById('game-sections').style.display = 'none';
            document.getElementById('alphabetNav').style.display = 'none';
        } else {
            document.getElementById('noResults').style.display = 'none';
            document.getElementById('game-sections').style.display = 'block';
            document.getElementById('alphabetNav').style.display = 'flex';
            renderGameSections(filtered);
        }
    }

    function clearSearch() {
        document.getElementById('searchInput').value = '';
        document.getElementById('noResults').style.display = 'none';
        document.getElementById('game-sections').style.display = 'block';
        document.getElementById('alphabetNav').style.display = 'flex';
        renderGameSections();
    }

    // GitHub fetching
    async function fetchWithFallback(filename) {
        const urls = [
            `https://cdn.jsdelivr.net/gh/${GITHUB_USER}/${GITHUB_REPO}@${GITHUB_BRANCH}/${filename}`,
            `https://raw.githubusercontent.com/${GITHUB_USER}/${GITHUB_REPO}/${GITHUB_BRANCH}/${filename}`,
            `https://${GITHUB_USER}.github.io/${GITHUB_REPO}/${filename}`
        ];

        for (let i = 0; i < urls.length; i++) {
            try {
                const response = await fetch(urls[i] + `?t=${Date.now()}`);
                if (response.ok) {
                    return await response.text();
                }
            } catch (err) {
                if (i === urls.length - 1) throw err;
            }
        }
        throw new Error('All methods failed');
    }

    async function fetchGames() {
        // Load games from JSON array
        games = GAMES_JSON.map(game => ({
            ...game,
            cover: game.cover.replace('{COVER_URL}', COVER_URL),
            isExternal: game.url.startsWith('http://') || game.url.startsWith('https://')
        }));

        console.log(`‚úì Loaded ${games.length} games`);
    }

    async function fetchProxies() {
        proxies = [
            { name: "Ultraviolet", path: "prox/ultraviolet.html" },
            { name: "Unit", path: "prox/Unit.html" }
        ];
        console.log(`‚úì Loaded ${proxies.length} proxies`);
    }

    // Render alphabet navigation
    function renderAlphabetNav() {
        const container = document.getElementById('alphabetNav');
        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        const grouped = groupGamesByLetter();
        
        container.innerHTML = alphabet.map(letter => {
            const disabled = !grouped[letter] ? 'disabled' : '';
            return `<div class="alphabet-letter ${disabled}" onclick="scrollToLetter('${letter}')">${letter}</div>`;
        }).join('');
    }

    function scrollToLetter(letter) {
        const element = document.getElementById(`section-${letter}`);
        if (element) {
            element.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    }

    function groupGamesByLetter(gameList = games) {
        const grouped = {};
        gameList.forEach(game => {
            const first = game.name.charAt(0).toUpperCase();
            if (!grouped[first]) grouped[first] = [];
            grouped[first].push(game);
        });
        return grouped;
    }

    function renderGameSections(gameList = games) {
        const container = document.getElementById('game-sections');
        const grouped = groupGamesByLetter(gameList);
        const letters = Object.keys(grouped).sort();
        
        if (letters.length === 0) {
            container.innerHTML = '';
            return;
        }
        
        container.innerHTML = letters.map(letter => `
            <div id="section-${letter}">
                <div class="section-title">üìÅ ${letter}</div>
                <div class="game-grid">
                    ${grouped[letter].map(game => {
                        const coverImg = game.cover && !game.cover.includes('undefined') 
                            ? `<img src="${game.cover}" class="game-cover" onerror="this.outerHTML='<div class=\\'game-cover placeholder\\'>üéÆ</div>'">`
                            : `<div class="game-cover placeholder">üéÆ</div>`;
                        
                        const author = game.author ? `<div class="game-author">by ${game.author}</div>` : '';
                        const externalBadge = game.isExternal ? '<div class="external-link-badge">üîó External</div>' : '';
                        const action = game.isExternal ? `window.open('${game.url}', '_blank')` : `loadGame('${game.url}', '${game.name.replace(/'/g, "\\'")}')`;
                        
                        return `
                            <div class="game-card" onclick="${action}">
                                ${externalBadge}
                                ${coverImg}
                                <div class="game-info">
                                    <h3>${game.name}</h3>
                                    ${author}
                                    <p>${game.isExternal ? 'Opens in new tab' : 'Click to play'}</p>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            </div>
        `).join('');
        
        // Update alphabet navigation
        document.querySelectorAll('.alphabet-letter').forEach(letter => {
            const letterChar = letter.textContent;
            if (grouped[letterChar]) {
                letter.classList.remove('disabled');
            } else {
                letter.classList.add('disabled');
            }
        });
        
        document.getElementById('noResults').style.display = 'none';
    }

    async function renderProxyItems() {
        const container = document.getElementById('proxyList');
        try {
            await fetchProxies();
            if (proxies.length === 0) {
                container.innerHTML = '<p style="color:#666;text-align:center;">No proxy files found.</p>';
                return;
            }
            container.innerHTML = proxies.map(p => `
                <div class="proxy-item" onclick="loadProxy('${p.path}', '${p.name}')">
                    ${p.name}
                </div>`).join('');
        } catch (e) {
            console.error(e);
            container.innerHTML = '<p style="color:#ff0000;text-align:center;">Failed to load proxies.</p>';
        }
    }

    // Game loading
    async function loadGame(filename, title) {
        currentGame = { filename, title };
        const loader = document.getElementById('game-loader');
        const container = document.getElementById('game-container');
        const frame = document.getElementById('game-frame');
        const gameTitle = document.getElementById('currentGameTitle');

        const verse = getRandomVerse();
        document.getElementById('verseText').textContent = '"' + verse.text + '"';
        document.getElementById('verseReference').textContent = '- ' + verse.ref;

        loader.style.display = 'flex';
        container.style.display = 'none';

        try {
            const html = await fetchWithFallback(filename);
            const gameFolder = filename.substring(0, filename.lastIndexOf('/') + 1);
            const baseUrl = 'https://cdn.jsdelivr.net/gh/' + GITHUB_USER + '/' + GITHUB_REPO + '@' + GITHUB_BRANCH + '/' + gameFolder;
            
            let modifiedHtml = html;
            if (!modifiedHtml.includes('<base')) {
                modifiedHtml = modifiedHtml.replace('<head>', '<head><base href="' + baseUrl + '">');
            }
            
            setTimeout(function() {
                gameTitle.textContent = title;
                const blob = new Blob([modifiedHtml], { type: 'text/html' });
                const blobUrl = URL.createObjectURL(blob);
                frame.src = blobUrl;
                frame.onload = function() { console.log('Game loaded'); };
                loader.style.display = 'none';
                container.style.display = 'flex';
            }, 5000);
        } catch (err) {
            loader.style.display = 'none';
            alert('Failed to load game: ' + err.message);
            console.error(err);
        }
    }

    async function loadProxy(filepath, title) {
        currentGame = { filename: filepath, title };
        const loader = document.getElementById('game-loader');
        const container = document.getElementById('game-container');
        const frame = document.getElementById('game-frame');
        const gameTitle = document.getElementById('currentGameTitle');

        const verse = getRandomVerse();
        document.getElementById('verseText').textContent = '"' + verse.text + '"';
        document.getElementById('verseReference').textContent = '- ' + verse.ref;

        loader.style.display = 'flex';
        container.style.display = 'none';

        try {
            const html = await fetchWithFallback(filepath);
            const gameFolder = filepath.substring(0, filepath.lastIndexOf('/') + 1);
            const baseUrl = 'https://cdn.jsdelivr.net/gh/' + GITHUB_USER + '/' + GITHUB_REPO + '@' + GITHUB_BRANCH + '/' + gameFolder;
            
            let modifiedHtml = html;
            if (!modifiedHtml.includes('<base')) {
                modifiedHtml = modifiedHtml.replace('<head>', '<head><base href="' + baseUrl + '">');
            }
            
            setTimeout(function() {
                gameTitle.textContent = title;
                const blob = new Blob([modifiedHtml], { type: 'text/html' });
                const blobUrl = URL.createObjectURL(blob);
                frame.src = blobUrl;
                frame.onload = function() { console.log('Proxy loaded'); };
                loader.style.display = 'none';
                container.style.display = 'flex';
            }, 5000);
        } catch (err) {
            loader.style.display = 'none';
            alert('Failed to load proxy: ' + err.message);
            console.error(err);
        }
    }

    function reloadGame() {
        if (currentGame.filename) {
            if (currentGame.filename.includes('prox/')) {
                loadProxy(currentGame.filename, currentGame.title);
            } else {
                loadGame(currentGame.filename, currentGame.title);
            }
        }
    }

    function toggleFullscreen() {
        const gameContainer = document.getElementById('game-container');
        const btn = document.getElementById('fullscreenBtn');
        const hint = document.getElementById('fullscreenHint');

        if (!document.fullscreenElement && !document.webkitFullscreenElement &&
            !document.mozFullScreenElement && !document.msFullscreenElement) {
            if (gameContainer.requestFullscreen) gameContainer.requestFullscreen();
            else if (gameContainer.webkitRequestFullscreen) gameContainer.webkitRequestFullscreen();
            else if (gameContainer.mozRequestFullScreen) gameContainer.mozRequestFullScreen();
            else if (gameContainer.msRequestFullscreen) gameContainer.msRequestFullscreen();

            btn.textContent = '‚õ∂ Exit Fullscreen';
            hint.classList.add('show');
            setTimeout(() => hint.classList.remove('show'), 3000);
        } else {
            if (document.exitFullscreen) document.exitFullscreen();
            else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
            else if (document.mozCancelFullScreen) document.mozCancelFullScreen();
            else if (document.msExitFullscreen) document.msExitFullscreen();

            btn.textContent = '‚õ∂ Fullscreen';
        }
    }

    document.addEventListener('fullscreenchange', updateFullscreenButton);
    document.addEventListener('webkitfullscreenchange', updateFullscreenButton);
    document.addEventListener('mozfullscreenchange', updateFullscreenButton);
    document.addEventListener('MSFullscreenChange', updateFullscreenButton);

    function updateFullscreenButton() {
        const btn = document.getElementById('fullscreenBtn');
        const inFull = document.fullscreenElement || document.webkitFullscreenElement ||
                        document.mozFullScreenElement || document.msFullscreenElement;
        btn.textContent = inFull ? '‚õ∂ Exit Fullscreen' : '‚õ∂ Fullscreen';
    }

    function closeGame() {
        if (document.fullscreenElement || document.webkitFullscreenElement ||
            document.mozFullScreenElement || document.msFullscreenElement) {
            if (document.exitFullscreen) document.exitFullscreen();
            else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
            else if (document.mozCancelFullScreen) document.mozCancelFullScreen();
            else if (document.msExitFullscreen) document.msExitFullscreen();
        }

        document.getElementById('game-container').style.display = 'none';
        document.getElementById('game-frame').src = '';
        currentGame = { filename: '', title: '' };
    }

    // Initialization
    async function initializeLauncher() {
        const loader = document.getElementById('initial-loader');
        const main = document.getElementById('main-content');
        const gameCount = document.getElementById('gameCount');
        const loadingText = loader.querySelector('.loading-text');

        // Apply saved theme
        applyTheme(currentTheme);
        renderThemeGrid();
        
        // Load saved teacher link
        loadTeacherLink();

        // Load saved tab customization
        loadTabCustomization();

        try {
            await fetchGames();
            gameCount.textContent = `${games.length} Games Found!`;
            loadingText.textContent = 'Loading games - use this wisely mostly during free time or lunch';

            setTimeout(() => {
                renderAlphabetNav();
                renderGameSections();
                loader.style.display = 'none';
                main.style.display = 'block';
            }, 1500);
        } catch (e) {
            loadingText.textContent = 'Error loading games';
            gameCount.innerHTML = '<span style="color:#ff0000;">Failed to load games. Check configuration.</span>';
            console.error(e);
            setTimeout(() => {
                loader.style.display = 'none';
                main.style.display = 'block';
            }, 2000);
        }
    }

    document.getElementById('proxysItem').addEventListener('click', () => {
        if (proxyUnlocked) renderProxyItems();
    });

    if (proxyUnlocked) {
        const proxyItem = document.getElementById('proxysItem');
        proxyItem.classList.remove('locked');
        proxyItem.innerHTML = 'üåê Proxys<span class="tooltip">Browse proxy files</span>';
    }
    
    if (testingUnlocked) {
        const testingItem = document.getElementById('testingItem');
        testingItem.classList.remove('locked');
        testingItem.innerHTML = 'üß™ Testing<span class="tooltip">Experimental features</span>';
    }

    initializeLauncher();
</script>
</body>
</html>
